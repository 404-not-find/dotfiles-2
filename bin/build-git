#!/bin/sh

# avoid "Document /<path>/git/Documentation/git-add.xml does not validate" errors
export XML_CATALOG_FILES=/usr/local/etc/xml/catalog

cd /data/repo/git
make distclean 1>/dev/null
make configure 1>/dev/null

if git pull | grep 'Already up-to-date.'; then
    [[ $1 == '-f' ]] && ./configure --prefix=$HOME/local/git && make install install-man
else
    ./configure --prefix=$HOME/local/git && make install install-man
fi
