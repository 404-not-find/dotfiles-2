#!/bin/zsh

if [[ -x ${commands[tput]} ]]; then
    blue1=$(tput setaf 228)
    blue2=$(tput setaf 215)
    blue3=$(tput setaf 222)
    green=$(tput setaf 77)
    red=$(tput setaf 167)
    reset=$(tput sgr0)
fi

sudo aptitude update | while read stat url source repo size; do
    if [[ $stat == Reading ]]; then
        continue
    elif [[ ($stat == Hit) || ($stat == Get:*) ]]; then
        echo "${green}${stat} ${blue1}${url} ${blue2}${source} ${blue3}${repo} ${blue2}${size}${reset}"
    else
        echo "${red}${stat} ${url} ${source} ${repo}${reset}"
    fi
done
